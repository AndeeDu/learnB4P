{
  "hash": "ff1f62becdf741430b71ddea0bde9ade",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"08 - Sensitivity analysis and other goods\"\nauthor: \"Stefano Coretta\"\nformat:\n  mono-light-revealjs:\n    theme: [default, custom.scss]\n    history: false\nfilters:\n  - tachyonsextra\nexecute:\n  echo: true\nknitr:\n  opts_chunk: \n    fig-align: center\n---\n\n\n\n\n## Set order of levels\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntoken_measures <- token_measures |> \n  mutate(\n    c2_phonation = factor(c2_phonation, levels = c(\"voiceless\", \"voiced\"))\n  )\n```\n:::\n\n\n## Model priors\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_7_priors <- c(\n  prior(normal(4.45, 0.275), class = b),\n  prior(normal(0, 0.5), class = b, coef = sspeech_rate_c_1),\n  prior(normal(0, 0.1), class = sigma),\n  prior(normal(0, 0.1), class = sd),\n  prior(normal(0, 0.1), class = sds),\n  prior(lkj(2), class = cor)\n)\n```\n:::\n\n\n## Fit model\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_8 <- brm(\n  v1_duration ~\n    0 + c2_phonation:vowel:language + s(speech_rate_c, k = 3) +\n    (0 + c2_phonation:vowel | speaker),\n  data = token_measures,\n  family = lognormal,\n  prior = m_7_priors,\n  seed = my_seed,\n  cores = 4,\n  file = \"data/cache/m_8\"\n)\n```\n:::\n\n\n## Model summary\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsummary(m_8, prob = 0.8)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Family: lognormal \n  Links: mu = identity; sigma = identity \nFormula: v1_duration ~ 0 + c2_phonation:vowel:language + s(speech_rate_c, k = 3) + (0 + c2_phonation:vowel | speaker) \n   Data: token_measures (Number of observations: 1342) \n  Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;\n         total post-warmup draws = 4000\n\nSmoothing Spline Hyperparameters:\n                      Estimate Est.Error l-80% CI u-80% CI Rhat Bulk_ESS\nsds(sspeech_rate_c_1)     0.19      0.06     0.11     0.26 1.00     4051\n                      Tail_ESS\nsds(sspeech_rate_c_1)     2316\n\nMultilevel Hyperparameters:\n~speaker (Number of levels: 17) \n                                                               Estimate\nsd(c2_phonationvoiceless:vowela)                                   0.11\nsd(c2_phonationvoiced:vowela)                                      0.11\nsd(c2_phonationvoiceless:vowelo)                                   0.10\nsd(c2_phonationvoiced:vowelo)                                      0.10\nsd(c2_phonationvoiceless:vowelu)                                   0.12\nsd(c2_phonationvoiced:vowelu)                                      0.10\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowela)        0.60\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelo)     0.73\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelo)        0.54\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelo)        0.62\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelo)           0.80\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelo)        0.64\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelu)     0.52\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelu)        0.21\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiceless:vowelu)     0.49\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiceless:vowelu)        0.26\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelu)        0.47\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelu)           0.45\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelu)        0.52\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiced:vowelu)           0.47\ncor(c2_phonationvoiceless:vowelu,c2_phonationvoiced:vowelu)        0.64\n                                                               Est.Error\nsd(c2_phonationvoiceless:vowela)                                    0.02\nsd(c2_phonationvoiced:vowela)                                       0.02\nsd(c2_phonationvoiceless:vowelo)                                    0.02\nsd(c2_phonationvoiced:vowelo)                                       0.02\nsd(c2_phonationvoiceless:vowelu)                                    0.02\nsd(c2_phonationvoiced:vowelu)                                       0.02\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowela)         0.16\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelo)      0.15\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelo)         0.17\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelo)         0.16\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelo)            0.12\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelo)         0.15\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelu)      0.18\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelu)         0.19\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiceless:vowelu)      0.18\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiceless:vowelu)         0.19\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelu)         0.20\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelu)            0.18\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelu)         0.18\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiced:vowelu)            0.18\ncor(c2_phonationvoiceless:vowelu,c2_phonationvoiced:vowelu)         0.17\n                                                               l-80% CI\nsd(c2_phonationvoiceless:vowela)                                   0.09\nsd(c2_phonationvoiced:vowela)                                      0.09\nsd(c2_phonationvoiceless:vowelo)                                   0.08\nsd(c2_phonationvoiced:vowelo)                                      0.09\nsd(c2_phonationvoiceless:vowelu)                                   0.09\nsd(c2_phonationvoiced:vowelu)                                      0.08\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowela)        0.39\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelo)     0.54\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelo)        0.30\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelo)        0.40\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelo)           0.64\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelo)        0.43\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelu)     0.28\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelu)       -0.04\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiceless:vowelu)     0.25\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiceless:vowelu)        0.00\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelu)        0.20\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelu)           0.21\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelu)        0.27\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiced:vowelu)           0.22\ncor(c2_phonationvoiceless:vowelu,c2_phonationvoiced:vowelu)        0.41\n                                                               u-80% CI Rhat\nsd(c2_phonationvoiceless:vowela)                                   0.13 1.00\nsd(c2_phonationvoiced:vowela)                                      0.14 1.00\nsd(c2_phonationvoiceless:vowelo)                                   0.12 1.00\nsd(c2_phonationvoiced:vowelo)                                      0.13 1.00\nsd(c2_phonationvoiceless:vowelu)                                   0.14 1.00\nsd(c2_phonationvoiced:vowelu)                                      0.13 1.00\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowela)        0.79 1.00\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelo)     0.89 1.00\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelo)        0.75 1.00\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelo)        0.81 1.00\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelo)           0.92 1.00\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelo)        0.82 1.00\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelu)     0.73 1.00\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelu)        0.46 1.00\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiceless:vowelu)     0.71 1.00\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiceless:vowelu)        0.51 1.00\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelu)        0.71 1.00\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelu)           0.68 1.00\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelu)        0.74 1.00\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiced:vowelu)           0.69 1.00\ncor(c2_phonationvoiceless:vowelu,c2_phonationvoiced:vowelu)        0.83 1.00\n                                                               Bulk_ESS\nsd(c2_phonationvoiceless:vowela)                                   1250\nsd(c2_phonationvoiced:vowela)                                      1772\nsd(c2_phonationvoiceless:vowelo)                                   1906\nsd(c2_phonationvoiced:vowelo)                                      2316\nsd(c2_phonationvoiceless:vowelu)                                   1969\nsd(c2_phonationvoiced:vowelu)                                      2444\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowela)        1659\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelo)     1571\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelo)        2539\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelo)        1725\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelo)           2610\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelo)        2996\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelu)     2120\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelu)        2194\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiceless:vowelu)     2104\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiceless:vowelu)        2423\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelu)        1616\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelu)           2408\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelu)        2031\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiced:vowelu)           2646\ncor(c2_phonationvoiceless:vowelu,c2_phonationvoiced:vowelu)        2894\n                                                               Tail_ESS\nsd(c2_phonationvoiceless:vowela)                                   1769\nsd(c2_phonationvoiced:vowela)                                      2606\nsd(c2_phonationvoiceless:vowelo)                                   2785\nsd(c2_phonationvoiced:vowelo)                                      2676\nsd(c2_phonationvoiceless:vowelu)                                   2469\nsd(c2_phonationvoiced:vowelu)                                      3025\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowela)        2602\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelo)     2225\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelo)        2734\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelo)        2551\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelo)           3212\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelo)        3106\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiceless:vowelu)     2552\ncor(c2_phonationvoiced:vowela,c2_phonationvoiceless:vowelu)        3087\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiceless:vowelu)     2556\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiceless:vowelu)        3196\ncor(c2_phonationvoiceless:vowela,c2_phonationvoiced:vowelu)        2364\ncor(c2_phonationvoiced:vowela,c2_phonationvoiced:vowelu)           2671\ncor(c2_phonationvoiceless:vowelo,c2_phonationvoiced:vowelu)        2505\ncor(c2_phonationvoiced:vowelo,c2_phonationvoiced:vowelu)           2996\ncor(c2_phonationvoiceless:vowelu,c2_phonationvoiced:vowelu)        3422\n\nRegression Coefficients:\n                                             Estimate Est.Error l-80% CI\nc2_phonationvoiceless:vowela:languageItalian     4.70      0.04     4.66\nc2_phonationvoiced:vowela:languageItalian        4.84      0.04     4.79\nc2_phonationvoiceless:vowelo:languageItalian     4.65      0.03     4.61\nc2_phonationvoiced:vowelo:languageItalian        4.80      0.03     4.76\nc2_phonationvoiceless:vowelu:languageItalian     4.47      0.04     4.42\nc2_phonationvoiced:vowelu:languageItalian        4.50      0.04     4.46\nc2_phonationvoiceless:vowela:languagePolish      4.50      0.05     4.45\nc2_phonationvoiced:vowela:languagePolish         4.61      0.05     4.55\nc2_phonationvoiceless:vowelo:languagePolish      4.38      0.04     4.33\nc2_phonationvoiced:vowelo:languagePolish         4.46      0.04     4.40\nc2_phonationvoiceless:vowelu:languagePolish      4.17      0.05     4.11\nc2_phonationvoiced:vowelu:languagePolish         4.25      0.05     4.19\nsspeech_rate_c_1                                -0.12      0.01    -0.13\n                                             u-80% CI Rhat Bulk_ESS Tail_ESS\nc2_phonationvoiceless:vowela:languageItalian     4.75 1.01      848     1418\nc2_phonationvoiced:vowela:languageItalian        4.89 1.00      974     1539\nc2_phonationvoiceless:vowelo:languageItalian     4.70 1.00     1035     1855\nc2_phonationvoiced:vowelo:languageItalian        4.85 1.00     1043     1931\nc2_phonationvoiceless:vowelu:languageItalian     4.52 1.00     1349     1880\nc2_phonationvoiced:vowelu:languageItalian        4.55 1.00     1176     1958\nc2_phonationvoiceless:vowela:languagePolish      4.56 1.00     1061     1629\nc2_phonationvoiced:vowela:languagePolish         4.67 1.00     1359     2085\nc2_phonationvoiceless:vowelo:languagePolish      4.44 1.00     1343     2188\nc2_phonationvoiced:vowelo:languagePolish         4.52 1.00     1424     2379\nc2_phonationvoiceless:vowelu:languagePolish      4.24 1.00     1347     1836\nc2_phonationvoiced:vowelu:languagePolish         4.30 1.00     1333     1953\nsspeech_rate_c_1                                -0.11 1.00     3990     3164\n\nFurther Distributional Parameters:\n      Estimate Est.Error l-80% CI u-80% CI Rhat Bulk_ESS Tail_ESS\nsigma     0.13      0.00     0.13     0.14 1.00     7556     2929\n\nDraws were sampled using sampling(NUTS). For each parameter, Bulk_ESS\nand Tail_ESS are effective sample size measures, and Rhat is the potential\nscale reduction factor on split chains (at convergence, Rhat = 1).\n```\n\n\n:::\n:::\n\n\n## Constant (aka fixed) coefficients\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nfixef(m_8)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                               Estimate   Est.Error       Q2.5\nc2_phonationvoiceless:vowela:languageItalian  4.7036193 0.035139190  4.6332045\nc2_phonationvoiced:vowela:languageItalian     4.8405653 0.036680903  4.7666069\nc2_phonationvoiceless:vowelo:languageItalian  4.6546952 0.033724692  4.5887558\nc2_phonationvoiced:vowelo:languageItalian     4.8031478 0.034044280  4.7355748\nc2_phonationvoiceless:vowelu:languageItalian  4.4694273 0.038646938  4.3974617\nc2_phonationvoiced:vowelu:languageItalian     4.5011339 0.035710181  4.4279623\nc2_phonationvoiceless:vowela:languagePolish   4.5032760 0.045599551  4.4152570\nc2_phonationvoiced:vowela:languagePolish      4.6071869 0.046979667  4.5144822\nc2_phonationvoiceless:vowelo:languagePolish   4.3809034 0.043588440  4.2945127\nc2_phonationvoiced:vowelo:languagePolish      4.4597988 0.043787193  4.3747349\nc2_phonationvoiceless:vowelu:languagePolish   4.1726964 0.051049784  4.0766763\nc2_phonationvoiced:vowelu:languagePolish      4.2466189 0.045867835  4.1592076\nsspeech_rate_c_1                             -0.1222801 0.008704368 -0.1389974\n                                                  Q97.5\nc2_phonationvoiceless:vowela:languageItalian  4.7717725\nc2_phonationvoiced:vowela:languageItalian     4.9129486\nc2_phonationvoiceless:vowelo:languageItalian  4.7226924\nc2_phonationvoiced:vowelo:languageItalian     4.8696711\nc2_phonationvoiceless:vowelu:languageItalian  4.5470384\nc2_phonationvoiced:vowelu:languageItalian     4.5707617\nc2_phonationvoiceless:vowela:languagePolish   4.5954815\nc2_phonationvoiced:vowela:languagePolish      4.7000069\nc2_phonationvoiceless:vowelo:languagePolish   4.4685048\nc2_phonationvoiced:vowelo:languagePolish      4.5451462\nc2_phonationvoiceless:vowelu:languagePolish   4.2742313\nc2_phonationvoiced:vowelu:languagePolish      4.3419343\nsspeech_rate_c_1                             -0.1051024\n```\n\n\n:::\n\n```{.r .cell-code}\n# try ranef(m_8) for varying aka random coefficients\n```\n:::\n\n\n## Constant coefficients tibble\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_8_fix <- fixef(m_8) |> as_tibble(rownames = \"term\")\nm_8_fix\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 13 × 5\n   term                                         Estimate Est.Error   Q2.5  Q97.5\n   <chr>                                           <dbl>     <dbl>  <dbl>  <dbl>\n 1 c2_phonationvoiceless:vowela:languageItalian    4.70    0.0351   4.63   4.77 \n 2 c2_phonationvoiced:vowela:languageItalian       4.84    0.0367   4.77   4.91 \n 3 c2_phonationvoiceless:vowelo:languageItalian    4.65    0.0337   4.59   4.72 \n 4 c2_phonationvoiced:vowelo:languageItalian       4.80    0.0340   4.74   4.87 \n 5 c2_phonationvoiceless:vowelu:languageItalian    4.47    0.0386   4.40   4.55 \n 6 c2_phonationvoiced:vowelu:languageItalian       4.50    0.0357   4.43   4.57 \n 7 c2_phonationvoiceless:vowela:languagePolish     4.50    0.0456   4.42   4.60 \n 8 c2_phonationvoiced:vowela:languagePolish        4.61    0.0470   4.51   4.70 \n 9 c2_phonationvoiceless:vowelo:languagePolish     4.38    0.0436   4.29   4.47 \n10 c2_phonationvoiced:vowelo:languagePolish        4.46    0.0438   4.37   4.55 \n11 c2_phonationvoiceless:vowelu:languagePolish     4.17    0.0510   4.08   4.27 \n12 c2_phonationvoiced:vowelu:languagePolish        4.25    0.0459   4.16   4.34 \n13 sspeech_rate_c_1                               -0.122   0.00870 -0.139 -0.105\n```\n\n\n:::\n:::\n\n\n\n## Prior sensitivity analysis\n\n::: box-note\n- Method from Betancourt 2018, *Calibrating Model-Based Inferences and Decisions*.\n\n- Uses posterior shrinkage and posterior z-score of parameters.\n\n- Can be easily calculated from the prior and posteriors parameters.\n:::\n\n## Prior sensitivity analysis: code\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_8_fix <- m_8_fix |> \n  mutate(\n    theta = c(rep(4.45, 12), 0),\n    sigma_prior = c(rep(0.275, 12), 0.5),\n    z = abs((Estimate - theta) / Est.Error),\n    s = 1 - (Est.Error^2 / sigma_prior^2)\n  )\nm_8_fix\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 13 × 9\n   term          Estimate Est.Error   Q2.5  Q97.5 theta sigma_prior      z     s\n   <chr>            <dbl>     <dbl>  <dbl>  <dbl> <dbl>       <dbl>  <dbl> <dbl>\n 1 c2_phonation…    4.70    0.0351   4.63   4.77   4.45       0.275  7.22  0.984\n 2 c2_phonation…    4.84    0.0367   4.77   4.91   4.45       0.275 10.6   0.982\n 3 c2_phonation…    4.65    0.0337   4.59   4.72   4.45       0.275  6.07  0.985\n 4 c2_phonation…    4.80    0.0340   4.74   4.87   4.45       0.275 10.4   0.985\n 5 c2_phonation…    4.47    0.0386   4.40   4.55   4.45       0.275  0.503 0.980\n 6 c2_phonation…    4.50    0.0357   4.43   4.57   4.45       0.275  1.43  0.983\n 7 c2_phonation…    4.50    0.0456   4.42   4.60   4.45       0.275  1.17  0.973\n 8 c2_phonation…    4.61    0.0470   4.51   4.70   4.45       0.275  3.35  0.971\n 9 c2_phonation…    4.38    0.0436   4.29   4.47   4.45       0.275  1.59  0.975\n10 c2_phonation…    4.46    0.0438   4.37   4.55   4.45       0.275  0.224 0.975\n11 c2_phonation…    4.17    0.0510   4.08   4.27   4.45       0.275  5.43  0.966\n12 c2_phonation…    4.25    0.0459   4.16   4.34   4.45       0.275  4.43  0.972\n13 sspeech_rate…   -0.122   0.00870 -0.139 -0.105  0          0.5   14.0   1.00 \n```\n\n\n:::\n:::\n\n\n\n## Prior sensitivity analysis graph\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlabels <- tibble(\n  s = c(0.25, 0.25, 0.75, 0.75),\n  z = c(1.25, 3.75, 1.25, 3.75),\n  term = c(\"Poorly identified\", \"Prior/Posterior\\nconflict\", \"Ideal\", \"Overfit\")\n)\n\nm_8_fix |> \n  ggplot(aes(s, z, label = term)) +\n  annotate(\"rect\", xmin = 0, ymin = 0, xmax = 0.5, ymax = 2.5, alpha = 0.5, fill = \"#e66101\") +\n  annotate(\"rect\", xmin = 0, ymin = 2.5, xmax = 0.5, ymax = Inf, alpha = 0.5, fill = \"#fdb863\") +\n  annotate(\"rect\", xmin = 0.5, ymin = 0, xmax = 1, ymax = 2.5, alpha = 0.5, fill = \"#b2abd2\") +\n  annotate(\"rect\", xmin = 0.5, ymin = 2.5, xmax = 1, ymax = Inf, alpha = 0.5, fill = \"#5e3c99\") +\n  geom_text(size = 2, nudge_x = -0.15) +\n  geom_point() +\n  geom_label(data = labels, colour = \"white\", fill = \"black\") +\n  xlim(0, 1)\n```\n\n::: {.cell-output-display}\n![](08_sensitive_files/figure-revealjs/prior-sens-plot-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## Plotting posteriors\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(bayesplot)\n\nas.array(m_8) |> \n  mcmc_areas(regex_pars = \"b_\")\n```\n\n::: {.cell-output-display}\n![](08_sensitive_files/figure-revealjs/mcmc-areas-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## Get posterior draws\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_8_draws <- as_draws_df(m_8)\nm_8_draws\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A draws_df: 1000 iterations, 4 chains, and 141 variables\n   b_c2_phonationvoiceless:vowela:languageItalian\n1                                             4.8\n2                                             4.8\n3                                             4.7\n4                                             4.7\n5                                             4.7\n6                                             4.7\n7                                             4.7\n8                                             4.7\n9                                             4.7\n10                                            4.7\n   b_c2_phonationvoiced:vowela:languageItalian\n1                                          4.9\n2                                          4.9\n3                                          4.8\n4                                          4.8\n5                                          4.8\n6                                          4.8\n7                                          4.8\n8                                          4.8\n9                                          4.9\n10                                         4.9\n   b_c2_phonationvoiceless:vowelo:languageItalian\n1                                             4.7\n2                                             4.7\n3                                             4.7\n4                                             4.7\n5                                             4.7\n6                                             4.6\n7                                             4.7\n8                                             4.7\n9                                             4.7\n10                                            4.7\n   b_c2_phonationvoiced:vowelo:languageItalian\n1                                          4.9\n2                                          4.9\n3                                          4.8\n4                                          4.8\n5                                          4.8\n6                                          4.8\n7                                          4.8\n8                                          4.8\n9                                          4.8\n10                                         4.8\n   b_c2_phonationvoiceless:vowelu:languageItalian\n1                                             4.5\n2                                             4.5\n3                                             4.4\n4                                             4.5\n5                                             4.5\n6                                             4.5\n7                                             4.5\n8                                             4.4\n9                                             4.5\n10                                            4.5\n   b_c2_phonationvoiced:vowelu:languageItalian\n1                                          4.5\n2                                          4.5\n3                                          4.5\n4                                          4.5\n5                                          4.5\n6                                          4.5\n7                                          4.5\n8                                          4.5\n9                                          4.5\n10                                         4.5\n   b_c2_phonationvoiceless:vowela:languagePolish\n1                                            4.5\n2                                            4.5\n3                                            4.4\n4                                            4.4\n5                                            4.5\n6                                            4.5\n7                                            4.5\n8                                            4.5\n9                                            4.5\n10                                           4.5\n   b_c2_phonationvoiced:vowela:languagePolish\n1                                         4.7\n2                                         4.7\n3                                         4.5\n4                                         4.6\n5                                         4.5\n6                                         4.6\n7                                         4.6\n8                                         4.6\n9                                         4.7\n10                                        4.7\n# ... with 3990 more draws, and 133 more variables\n# ... hidden reserved variables {'.chain', '.iteration', '.draw'}\n```\n\n\n:::\n:::\n\n\n## Difference by language across all vowels\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_8_avg_diff <- m_8_draws |> \n  select(`b_c2_phonationvoiceless:vowela:languageItalian`:`b_c2_phonationvoiced:vowelu:languagePolish`, .draw) |> \n  pivot_longer(`b_c2_phonationvoiceless:vowela:languageItalian`:`b_c2_phonationvoiced:vowelu:languagePolish`) |> \n  separate(name, c(\"phonation\", \"vowel\", \"language\"), sep = \":\") |> \n  pivot_wider(names_from = phonation, values_from = value) |> \n  mutate(\n    diff = b_c2_phonationvoiced - b_c2_phonationvoiceless\n  ) |> \n  group_by(.draw, language) |> \n  summarise(\n    avg_diff = mean(diff)\n  )\nm_8_avg_diff\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8,000 × 3\n# Groups:   .draw [4,000]\n   .draw language        avg_diff\n   <int> <chr>              <dbl>\n 1     1 languageItalian   0.101 \n 2     1 languagePolish    0.136 \n 3     2 languageItalian   0.0931\n 4     2 languagePolish    0.143 \n 5     3 languageItalian   0.0930\n 6     3 languagePolish    0.0917\n 7     4 languageItalian   0.0847\n 8     4 languagePolish    0.160 \n 9     5 languageItalian   0.0881\n10     5 languagePolish    0.0283\n# ℹ 7,990 more rows\n```\n\n\n:::\n:::\n\n\n## Plot the average difference across vowels\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08_sensitive_files/figure-revealjs/m-8-avg-diff-plot-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## Calculate average difference (ms)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\navg_comparisons(m_8, variables = \"c2_phonation\", by = \"language\", conf_level = 0.8)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n         Term                       Contrast language Estimate 10.0 % 90.0 %\n c2_phonation mean(voiced) - mean(voiceless)  Italian    13.45  12.06  14.78\n c2_phonation mean(voiced) - mean(voiceless)  Polish      7.32   6.11   8.58\n\nColumns: term, contrast, language, estimate, conf.low, conf.high, predicted_lo, predicted_hi, predicted, tmp_idx \nType:  response \n```\n\n\n:::\n:::\n\n\n## Calculate average difference (ratio)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\navg_comparisons(m_8, variables = \"c2_phonation\", by = \"language\", conf_level = 0.8, comparison = \"ratio\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n         Term                       Contrast language Estimate 10.0 % 90.0 %\n c2_phonation mean(voiced) / mean(voiceless)  Italian     1.12   1.11   1.13\n c2_phonation mean(voiced) / mean(voiceless)  Polish      1.10   1.08   1.11\n\nColumns: term, contrast, language, estimate, conf.low, conf.high, predicted_lo, predicted_hi, predicted, tmp_idx \nType:  response \n```\n\n\n:::\n\n```{.r .cell-code}\navg_comparisons(m_8, variables = \"c2_phonation\", by = \"language\", conf_level = 0.8, comparison = \"ratio\", hypothesis = \"b2 = b1\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  Term Estimate  10.0 %   90.0 %\n b2=b1  -0.0245 -0.0457 -0.00278\n\nColumns: term, estimate, conf.low, conf.high \nType:  response \n```\n\n\n:::\n:::\n",
    "supporting": [
      "08_sensitive_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}